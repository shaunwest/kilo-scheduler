!function(t){"use strict";function e(t){var e;t&&("complete"===document.readyState?t(document):e=setInterval(function(){"complete"===document.readyState&&(t(document),clearInterval(e))},10))}function n(t){var e;if(c.isObject(t))for(e in t)t.hasOwnProperty(e)&&a.register(e,[],function(t){return function(){return t}}(t[e]))}function r(t,n,r){e(function(e){var i,o,u,s,c,a=[];if(n)s=n.querySelectorAll("*");else{if(!l){if(n=e.getElementsByTagName("body"),!n||!n[0])return;l=n[0].querySelectorAll("*")}s=l}for(c=t.indexOf("[]"),-1!==c&&(t=t.substring(0,c)),i=0,o=s.length;o>i;i++)u=s[i],u.hasAttribute("data-"+t)&&a.push(u);r(-1===c?a[0]:a)})}function i(t,e){switch(t){case"application/json":case"application/json; charset=utf-8":return JSON.parse(e);default:return e}}function o(t,e,n){var r=new XMLHttpRequest;n&&r.addEventListener("progress",function(t){n(t.loaded,t.total)},!1),r.onerror=function(){c.error("Network error.")},r.onload=function(){var t=t||this.getResponseHeader("content-type");switch(this.status){case 500:case 404:e(this.statusText,this.status);break;case 304:default:e(i(t,this.responseText),this.status)}},r.open("get",t,!0),r.send()}function u(t,e,n,r){c.isArray(e)&&c.isFunction(n)?a.register(t,e,n,r):c.isFunction(e)&&a.register(t,[],e,n)}var s,c,a,f,l,h={},d={},p=void 0,g=t;c={isDefined:function(t){return"undefined"!=typeof t},isBoolean:function(t){return"boolean"==typeof t},def:function(t,e){return"undefined"==typeof t?e:t},error:function(t){throw new Error(g+": "+t)},warn:function(t){c.log("Warning: "+t)},log:function(t){s.log&&console.log(g+": "+t)},argsToArray:function(t){return Array.prototype.slice.call(t)},getGID:function(t){return t=c.def(t,""),d[t]=c.def(d[t],0),t+ ++d[t]},rand:function(t,e){return e=e||0,(e>t||e>t)&&c.error("rand: invalid range."),Math.floor(Math.random()*(t-e+1))+e}},f=["Array","Object","Arguments","Function","String","Number","Date","RegExp","HTMLImageElement"];for(var v=0;v<f.length;v++)c["is"+f[v]]=function(t){return function(e){return Object.prototype.toString.call(e)==="[object "+t+"]"}}(f[v]);return a={unresolved:{},modules:{},register:function(t,e,n,r){return this.unresolve(t),this.unresolved[t]={deps:e,func:n,scope:r},this},unresolve:function(t){return this.modules[t]&&delete this.modules[t],this},setModule:function(t,e){return this.modules[t]=e,this},getDependency:function(t,e){var n,i;return n=this.modules,(i=n[t])?void e(i):-1!=t.indexOf("/")?void o(t,e):(i=this.unresolved[t])?(c.log("Resolving dependencies for '"+t+"'"),void this.resolveAndApply(i.deps,i.func,i.scope,function(r){c.isObject(r)&&(r.getType=function(){return t}),n[t]=r,e(r)})):void r(t,null,function(n){n?e(n):c.warn("Module '"+t+"' not found")})},resolve:function(t,e,n,r){var i,o=this;return t?(n=c.def(n,0),(i=t[n])?void this.getDependency(i,function(u){r||(r=[]),u?r.push(u):c.error("Can't resolve "+i),o.resolve(t,e,n+1,r)}):void e(r)):void done()},apply:function(t,e,n){var r=e.apply(n||s,t);return r},resolveAndApply:function(t,e,n,r){var i=this;this.resolve(t,function(t){var o=i.apply(t,e,n);r&&r(o)})},process:function(t,e){var n,r,i;if(c.isArray(t))for(n=0,r=t.length;r>n;n++)i=t[n],c.isString(i)?this.getDependency(i,function(t){e(t)}):e(i);else c.isString(t)?this.getDependency(t,function(t){e(t)}):e(t)}},s=function(){},s.use=function(t,e,n,r){var i;c.isString(t)?a.resolveAndApply([t],e,n,r):c.isArray(t)?a.resolveAndApply(t,e,n,r):c.isFunction(t)&&(i=a.apply([],t,e),r&&r(i))},s.use.defer=function(t,e,n){return function(r){s.use(t,e,n,r)}},s.use.run=function(t,e){return s.use.defer(t,function(t){return c.isFunction(t)?t():void console.log("asdfasf")},e)},s.register=function(t,e,n,r){return c.isFunction(e)||c.isFunction(n)?u(t,e,n,r):{depends:function(){return e=c.argsToArray(arguments),this},factory:function(n,r){u(t,e,n,r)}}},s.unresolve=function(t){a.unresolve(t)},s.noConflict=function(){return window[t]=p,s},s.onDocumentReady=e,s.log=!0,a.setModule("Util",c).setModule("Injector",a).setModule("element",r).setModule("registerAll",n).setModule("httpGet",o).setModule("appConfig",h),window[t]&&(c.warn("a preexisting value at namespace '"+t+"' has been overwritten."),p=window[t]),window[t]=s,window.register||(window.register=s.register),window.use||(window.use=s.use),s}("kilo"),register("Canvas",[],function(){"use strict";return{clearContext:function(t,e,n){t.clearRect(0,0,e,n)},drawBackground:function(t,e,n,r,i,o){t.fillStyle=o||"red",t.fillRect(r||0,i||0,e,n)},drawBorder:function(t,e,n,r,i,o){t.beginPath(),t.strokeStyle=o||"black",t.rect(r||0,i||0,e,n),t.stroke(),t.closePath()}}}),register("Factory",["Obj","Pool"],function(t){"use strict";return function(e){var n=t.mixin([e]);return n}}),register("Func",[],function(){"use strict";function t(t){var e=Array.prototype.slice.call(arguments,1);return function(){for(var n=e.slice(),r=0;r<arguments.length;r++)n.push(arguments[r]);return t.apply(this,n)}}function e(e,n){return t(n,e)}function n(t){return function(){var e=Array.prototype.slice.call(arguments),n=e.length;return function(r){return e[n]=r,t.apply(this,e)}}}return{partial:t,fastPartial:n,wrap:e}}),register("HashArray",function(){"use strict";function t(){this.values=[],this.keyMap={}}function e(t,e){var n;for(n in t)t.hasOwnProperty(n)&&t[n]>e&&t[n]--}function n(t,e){var n;for(n in t)t.hasOwnProperty(n)&&t[n]>=e&&t[n]++}return t.prototype.set=function(t,e){return this.keyMap[t]?(this.values[this.keyMap[t]]=e,!0):(this.values.push(e),this.keyMap[t]=this.values.length-1,!1)},t.prototype.splice=function(t,e,r){var i=this.keyMap[t]+1;this.values.splice(i,0,r),n(this.keyMap,i),this.keyMap[e]=i},t.prototype.get=function(t){return this.values[this.keyMap[t]]},t.prototype.remove=function(t){var n=this.keyMap[t];this.values.splice(n,1),e(this.keyMap,n),delete this.keyMap[t]},t.prototype.removeAll=function(){var t,e=this.keyMap;this.values.length=0;for(t in e)delete e[t]},t.prototype.getIdByIndex=function(t){var e,n=this.keyMap;for(e in n)if(n[e]===t)return e;return""},t.prototype.getKeys=function(){var t,e=this.size(),n=[];for(t=0;e>t;t++)n.push(this.getIdByIndex(t));return n},t.prototype.getValues=function(){return this.values},t.prototype.size=function(){return this.values.length},t}),register("KeyStore",["HashArray","Util"],function(t,e){"use strict";function n(){this.lastId=0,this.store=new t}return n.prototype.get=function(t){return this.store.get(t)},n.prototype.set=function(t,n){var r;return e.isDefined(n)?r=t||this.lastId++:(r=this.lastId++,n=t),this.store.add(r,n),r},n.prototype.setGroup=function(t,n){var r,i;return e.isDefined(n)?(r=t,e.isDefined(r)?i=this.get(r):(r=this.lastId++,i=[],this.store.add(r,i))):(r=this.lastId++,n=t,i=[],this.store.add(r,i)),i?i.push(n):console.error("Jack2d: keyStore: id '"+r+"' not found."),r},n.prototype.clear=function(t){e.isDefined(t)?this.store.remove(t):this.store.removeAll()},n.prototype.getItems=function(){return this.store.items},n}),register("Merge",["Obj"],function(t){"use strict";return t.merge.bind(t)}),register("Obj",["Injector","Util","Func","Pool"],function(t,e,n,r){"use strict";function i(t,e,n,i){return t=t||r.getObject(),e=e||r.getObject(),Object.keys(t).forEach(function(r){o(t,e,r,n,i)}),e}function o(t,r,i,o,u){return r.hasOwnProperty(i)?o?(r[i]=n.wrap(r[i],t[i]),e.log("Merge: wrapped '"+i+"'")):u?e.error("Failed to merge mixin. Method '"+i+"' caused a name collision."):(r[i]=t[i],e.log("Merge: overwrote '"+i+"'")):r[i]=t[i],r}function u(t,n){var r={};return Object.keys(t).forEach(function(i){e.isFunction(t[i])&&(r[i]=s(t[i],t,n))}),r}function s(t,n,r){return function(){var i=e.argsToArray(arguments);return r?(i.unshift(t),r.apply(n,i)):t.apply(n,i)}}function c(t,e,n){Object.keys(t).forEach(function(r){t[r]===e&&(t[r]=n)})}function a(t,e){return u(t,e)}function f(t){return l(t)}function l(t,e){var n;e=e||r.getObject();for(n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function h(t){var n,r="";if(e.isObject(t))for(n in t)t.hasOwnProperty(n)&&!e.isFunction(t[n])&&(r+=n+": "+t[n]+"<br>");return r}function d(t){var e;for(e in t)t.hasOwnProperty(e)&&delete t[e];return t}function p(t){return g(t)}function g(e,n,r){return t.process(e,function(t){n=i(t,n,!1,r)}),n}function v(e,n){return t.process(e,function(t){n=i(t,n,!0)}),n}return{print:h,clear:d,clone:p,quickClone:f,merge:g,quickMerge:l,wrap:v,augment:a,replaceMethod:c}}),register("Pool",[],function(){"use strict";function t(){var t=i.pop();return t||(t={}),t}function e(t){var e;for(e in t)t.hasOwnProperty(e)&&delete t[e];return t}function n(t){i.push(e(t))}function r(){return i.length}var i=[];return{getObject:t,killObject:n,available:r}}),register("rect",[],function(){"use strict";function t(t,e,n){return!(t<n.left||t>n.right||e<n.top||e>n.bottom)}function e(t,e){return!(t.left<e.left||t.right>e.right||t.top<e.top||t.bottom>e.bottom)}function n(t,e){var n=!(t.left<e.left||t.right>e.right);return n?!1:t.left-e.left}function r(t,e){return!(t<e.left||t>e.right)}function i(t,e){var n=!(t.top<e.top||t.bottom>e.bottom);return n?!1:t.top-e.top}function o(t,e){return!(t<e.top||t>e.bottom)}function u(t,e){var n=!(e.left>=t.right||e.right<=t.left);return n?t.left-e.left:!1}function s(t,e){var n=!(e.top>=t.bottom||e.bottom<=t.top);return n?t.top-e.top:!1}return{setLeft:function(t){return this.left=t,this},setTop:function(t){return this.top=t,this},setRight:function(t){return this.right=t,this},setBottom:function(t){return this.bottom=t,this},containsPoint:t,containsRect:e,containsX:r,containsY:o,containsRectX:n,containsRectY:i,intersectsRectX:u,intersectsRectY:s}}),register("Wrap",["Obj"],function(t){"use strict";return t.wrap.bind(t)}),function(){for(var t=0,e=["ms","moz","webkit","o"],n=0;n<e.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[e[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[n]+"CancelAnimationFrame"]||window[e[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e){var n=(new Date).getTime(),r=Math.max(0,16-(n-t)),i=window.setTimeout(function(){e(n+r)},r);return t=n+r,i}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})}(),register("SchedulerObject",["Util","Scheduler","Func"],function(t,e,n){"use strict";return{onFrame:function(n,r){var i=t.getGID(r);return this.schedulerIds||(this.schedulerIds=[]),this.hooks||(this.hooks={}),n=n.bind(this),r&&(this.hooks[r]=i),this.schedulerIds.push(e.register(n,i)),this},getSchedulerId:function(t){return this.hooks?this.hooks[t]:null},hook:function(t,r){var i,o=this.getSchedulerId(t);return o&&(i=e.getRegistered(o),i=n.wrap(i,r),e.register(i,o)),this},killOnFrame:function(t){return t?e.unRegister(t):this.schedulerIds&&this.schedulerIds.forEach(function(t){e.unRegister(t)}),this}}}),register("Scheduler",["HashArray","Util"],function(t,e){"use strict";function n(){return r(),f(),D}function r(){return w=60,b=0,A=0,M=0,O=0,I=0,F=new t,k=!1,R=new Date,D}function i(t,n){return e.isFunction(t)||e.error("Scheduler: only functions can be registered."),n||(n=e.getGID(n)),F.set(n,t),n}function o(t,e,n){return n||(n=O++),F.splice(t,n,e),n}function u(t){return F.remove(t),D}function s(t){return t?F.get(t):F.getValues()}function c(){S=window.requestAnimationFrame(h)}function a(){return F.size()}function f(){return k||(k=!0,j=window.setInterval(v,P),h()),D}function l(){return k=!1,window.clearInterval(j),window.cancelAnimationFrame(S),D}function h(){d(p()),g(),k&&c()}function d(t){var e,n,r,i;for(e=F.getValues(),n=e.length,i=0;n>i;i++)r=e[i],r&&r(t)}function p(){var t=+new Date,e=(t-R)/P;return R=t,e}function g(){A++}function v(){b=A.toString(),A=0,M++}function y(){return b}function m(){return M}var w,b,A,k,M,F,O,I,j,S,R,D,P=1e3;return n(),D={__mixin:!1,init:n,reset:r,start:f,stop:l,register:i,registerAfter:o,unRegister:u,getRegistered:s,registeredCount:a,getFps:y,getSeconds:m}});